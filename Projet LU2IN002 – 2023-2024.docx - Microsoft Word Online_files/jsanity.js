if("undefined"!=typeof jSanity)throw"jSanity has been defined, please check if there's any duplicate reference.";jSanity={},function(e){"use strict";var t={inputString:"",maxWidth:"600px",maxHeight:"200px",overflow:"hidden",allowLinks:!0,linkClickCallback:null,customProtocols:{},allowRelativeURLs:!1,allowAudioVideo:!1,unsupportedContentCallback:null,externalContentCallback:function(e,t,r,o){var i;if("attribute"===e&&"src"===t)for(var n in o)if(o.hasOwnProperty(n)&&r.substring(0,n.length)===n){i=!0;break}return i||(r="CSSURL"===e?'url("about:blank")':"about:blank"),r},isolatedTargetDOM:!1,directModifySource:!0,attributePrefix:"jSanity",dataAttributeCallback:null,debugLevel:0,onFinishedCallback:null},r=function(){this.sync=!0,this.jobs=[],this.id=r.globalId++,this.listnerPosfix=0,this.onCompletedListners={},this.onNewJobAddedListners={},this.useSync=function(){this.sync=!0},this.useAsync=function(){this.sync=!1},this.addNewJob=function(e){for(var t in this.jobs.push(e),this.onNewJobAddedListners)if(this.onNewJobAddedListners.hasOwnProperty(t))try{this.onNewJobAddedListners[t](e)}catch(e){}},this.registerOnJobCompleted=function(e){var t;return this.listnerPosfix+=1,t=this.id.toString()+this.listnerPosfix.toString(),this.onCompletedListners[t]=e,t},this.registerOnNewJobAdded=function(e){var t;return this.listnerPosfix+=1,t=this.id.toString()+this.listnerPosfix.toString(),this.onNewJobAddedListners[t]=e,t},this.unRegisterListner=function(e){this.onCompletedListners[e]?delete this.onCompletedListners[e]:this.onNewJobAddedListners[e]&&delete this.onNewJobAddedListners[e]},this.run=function(){var e,t,o,i,n=null,a=this.sync;e=(new Date).getTime();do{if(n=this.jobs.pop())try{n()}catch(e){}else for(var l in this.onCompletedListners)if(this.onCompletedListners.hasOwnProperty(l))try{this.onCompletedListners[l]()}catch(e){}t=(new Date).getTime(),n&&!this.sync&&(a=t-e<r.maxExecutionTimeForMergedAsyncJobs)}while(a&&n);if(!this.sync&&n){var s=(o=this.run,i=this,function(){o.apply(i)});setTimeout(s,0)}}};r.globalId=0,r.maxExecutionTimeForMergedAsyncJobs=15;var o=function(e,r){var o=new e;r.onFinishedCallback?o.useAsync():o.useSync();var i,n,a,l,s,d={default:{knownElements:{html:1,style:1,noscript:1,body:1,section:1,nav:1,article:1,aside:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hgroup:1,header:1,footer:1,address:1,p:1,hr:1,pre:1,blockquote:1,ol:1,ul:1,li:1,dl:1,dt:1,dd:1,figure:1,figcaption:1,div:1,a:1,em:1,strong:1,small:1,s:1,cite:1,q:1,dfn:1,abbr:1,code:1,var:1,samp:1,kbd:1,sub:1,sup:1,i:1,b:1,u:1,mark:1,ruby:1,rt:1,rp:1,bdi:1,bdo:1,span:1,br:1,wbr:1,ins:1,del:1,img:1,video:1,audio:1,source:1,map:1,area:1,svg:1,math:1,table:1,caption:1,colgroup:1,col:1,tbody:1,thead:1,tfoot:1,tr:1,td:1,th:1,input:1,button:1,select:1,datalist:1,optgroup:1,option:1,textarea:1,progress:1,meter:1,details:1,summary:1,command:1,menu:1,center:1,font:1},knownAttributes:{class:1,contenteditable:1,dir:1,hidden:1,id:1,lang:1,spellcheck:1,tabindex:1,title:1,cite:1,reversed:1,start:1,value:1,href:1,hreflang:1,rel:1,datetime:1,alt:1,height:1,ismap:1,src:1,width:1,usemap:1,autoplay:1,controls:1,loop:1,muted:1,preload:1,coords:1,shape:1,span:1,colspan:1,headers:1,rowspan:1,scope:1,checked:1,disabled:1,max:1,maxlength:1,min:1,name:1,placeholder:1,readonly:1,selectiondirection:1,size:1,step:1,selectedindex:1,label:1,selected:1,cols:1,rows:1,selectionend:1,selectionstart:1,wrap:1,low:1,high:1,optimum:1,open:1,align:1,face:1,hspace:1,vspace:1,border:1,cellpadding:1,cellspacing:1}},"http://www.w3.org/2000/svg":{knownElements:{a:1,altGlyph:1,altGlyphDef:1,altGlyphItem:1,circle:1,clipPath:1,defs:1,desc:1,ellipse:1,feBlend:1,feColorMatrix:1,feComponentTransfer:1,feComposite:1,feConvolveMatrix:1,feDiffuseLighting:1,feDisplacementMap:1,feDistantLight:1,feFlood:1,feFuncA:1,feFuncB:1,feFuncG:1,feFuncR:1,feGaussianBlur:1,feMerge:1,feMergeNode:1,feMorphology:1,feOffset:1,fePointLight:1,feSpecularLighting:1,feSpotLight:1,feTile:1,feTurbulence:1,filter:1,font:1,g:1,glyph:1,glyphRef:1,hkern:1,image:1,line:1,linearGradient:1,marker:1,mask:1,metadata:1,mpath:1,path:1,pattern:1,polygon:1,polyline:1,radialGradient:1,rect:1,stop:1,style:1,svg:1,switch:1,symbol:1,text:1,textPath:1,title:1,tref:1,tspan:1,view:1,vkern:1},knownAttributes:{accumulate:1,additive:1,"alignment-baseline":1,amplitude:1,ascent:1,attributeType:1,azimuth:1,baseFrequency:1,"baseline-shift":1,bias:1,calcMode:1,class:1,clip:1,"clip-rule":1,clipPathUnits:1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-rendering":1,cx:1,cy:1,d:1,diffuseConstant:1,direction:1,display:1,divisor:1,"dominant-baseline":1,dur:1,dx:1,dy:1,edgeMode:1,elevation:1,exponent:1,fill:1,"fill-opacity":1,"fill-rule":1,filterUnits:1,"flood-color":1,"flood-opacity":1,"font-family":1,"font-size":1,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,fx:1,fy:1,g1:1,g2:1,"glyph-name":1,glyphRef:1,gradientTransform:1,gradientUnits:1,height:1,id:1,"image-rendering":1,in:1,in2:1,intercept:1,k:1,k1:1,k2:1,k3:1,k4:1,kernelMatrix:1,kernelUnitLength:1,kerning:1,keyPoints:1,lang:1,lengthAdjust:1,"letter-spacing":1,"lighting-color":1,limitingConeAngle:1,local:1,markerHeight:1,markerUnits:1,markerWidth:1,maskContentUnits:1,maskUnits:1,max:1,media:1,method:1,min:1,mode:1,name:1,numOctaves:1,offset:1,opacity:1,operator:1,order:1,orient:1,orientation:1,origin:1,overflow:1,path:1,pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,points:1,pointsAtX:1,pointsAtY:1,pointsAtZ:1,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,r:1,radius:1,refX:1,refY:1,repeatCount:1,repeatDur:1,restart:1,result:1,rotate:1,rx:1,ry:1,scale:1,seed:1,"shape-rendering":1,slope:1,specularConstant:1,specularExponent:1,spreadMethod:1,startOffset:1,stdDeviation:1,stitchTiles:1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":1,style:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,"text-anchor":1,"text-decoration":1,"text-rendering":1,textLength:1,transform:1,type:1,u1:1,u2:1,"unicode-bidi":1,values:1,"vert-adv-y":1,"vert-origin-x":1,"vert-origin-y":1,viewBox:1,visibility:1,width:1,"word-spacing":1,"writing-mode":1,x:1,x1:1,x2:1,xChannelSelector:1,y:1,y1:1,y2:1,yChannelSelector:1,z:1,zoomAndPan:1}}},c={"http://":1,"https://":1,"ftp://":1,"mailto:":1},u={"background-attachment":1,"background-color":1,"background-image":1,"background-position":1,"background-repeat":1,"background-clip":1,"background-origin":1,"background-size":1,border:1,"border-bottom":1,"border-bottom-color":1,"border-bottom-style":1,"border-bottom-width":1,"border-color":1,"border-left":1,"border-left-color":1,"border-left-style":1,"border-left-width":1,"border-right":1,"border-right-color":1,"border-right-style":1,"border-right-width":1,"border-style":1,"border-top":1,"border-top-color":1,"border-top-style":1,"border-top-width":1,"border-width":1,outline:1,"outline-color":1,"outline-style":1,"outline-width":1,"border-bottom-left-radius":1,"border-bottom-right-radius":1,"border-radius":1,"border-top-left-radius":1,"border-top-right-radius":1,"box-decoration-break":1,"box-shadow":1,"overflow-x":1,"overflow-y":1,"overflow-style":1,rotation:1,"rotation-point":1,opacity:1,height:1,"max-height":1,"max-width":1,"min-height":1,"min-width":1,width:1,"box-align":1,"box-direction":1,"box-flex":1,"box-flex-group":1,"box-lines":1,"box-ordinal-group":1,"box-orient":1,"box-pack":1,font:1,"font-family":1,"font-size":1,"font-style":1,"font-variant":1,"font-weight":1,"font-size-adjust":1,"font-stretch":1,"grid-columns":1,"grid-rows":1,margin:1,"margin-bottom":1,"margin-left":1,"margin-right":1,"margin-top":1,"column-count":1,"column-fill":1,"column-gap":1,"column-rule":1,"column-rule-color":1,"column-rule-style":1,"column-rule-width":1,"column-span":1,"column-width":1,columns:1,padding:1,"padding-bottom":1,"padding-left":1,"padding-right":1,"padding-top":1,bottom:1,clear:1,clip:1,display:1,float:1,left:1,overflow:1,position:1,right:1,top:1,visibility:1,"z-index":1,"border-collapse":1,"border-spacing":1,"caption-side":1,"empty-cells":1,"table-layout":1,color:1,direction:1,"letter-spacing":1,"line-height":1,"text-align":1,"text-decoration":1,"text-indent":1,"text-transform":1,"unicode-bidi":1,"vertical-align":1,"white-space":1,"word-spacing":1,"hanging-punctuation":1,"punctuation-trim":1,"text-align-last":1,"text-justify":1,"text-outline":1,"text-shadow":1,"text-wrap":1,"word-break":1,"word-wrap":1,"alignment-baseline":1,"baseline-shift":1,"clip-rule":1,"color-interpolation":1,"color-interpolation-filters":1,"color-rendering":1,"dominant-baseline":1,"fill-opacity":1,"fill-rule":1,"flood-color":1,"flood-opacity":1,"image-rendering":1,kerning:1,"lighting-color":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":1,"text-anchor":1,"text-rendering":1,"writing-mode":1},p=[];function h(e,t){window.console&&n.debugLevel>=e&&console.log("jSanity: "+t)}function b(e,t,r){return function(){var o=i.currentNode;i.currentNode=e,function(e,t){var r,o,s,b,m,g,y,k,w,v;r=i.currentNode;for(var x,C,S,A=new Array,L=i.firstChild();null!==L;L=i.nextSibling())switch(L.nodeType){case L.ELEMENT_NODE:if((s=L.tagName.toLowerCase())in d[e].knownElements){if(b=e,"svg"===s&&(e="http://www.w3.org/2000/svg"),o=n.directModifySource?L:"default"==e?l.createElement(s):l.createElementNS(e,s),m=!1,n.allowAudioVideo||"video"!==s&&"audio"!==s&&"source"!==s||(m=!0),"style"===s&&(m=!0),!m){x=null;for(var M=0;M<L.attributes.length;M++)if((v=L.attributes[M].name.toLowerCase())in d[e].knownAttributes)if("href"===v){if(g=!1,n.allowLinks)for(var P in c)if(c.hasOwnProperty(P)&&L.attributes[M].value.substring(0,P.length)===P){g=!0,o.setAttribute("href",L.attributes[M].value),null!==n.linkClickCallback&&(x="/*jSanityClickCallback*/");break}g||(x="/*jSanityReturnFalseCallback*/")}else if("class"===v)n.directModifySource&&(L.removeAttribute(L.attributes[M].name),M--);else if("name"===v||"id"===v)y=n.attributePrefix+"_",void 0!==a&&(y+=a+"_"),L.attributes[M].value.length>0&&(L.attributes[M].value.length>y.length&&L.attributes[M].value.substring(0,y.length)===y?o.setAttribute(L.attributes[M].name,L.attributes[M].value):o.setAttribute(L.attributes[M].name,y+L.attributes[M].value));else if("src"===v){if(k=L.attributes[M].value,null!==n.externalContentCallback&&(k=n.externalContentCallback("attribute","src",k,c)),null===k){m=!0;break}o.setAttribute("src",k)}else o.setAttribute(L.attributes[M].name,L.attributes[M].value);else if(null!==n.dataAttributeCallback&&"data-"===v.substring(0,5)){if(null!==(w=n.dataAttributeCallback(L.attributes[M].name,L.attributes[M].value)))try{o.setAttribute(L.attributes[M].name,w)}catch(e){h(0,"Unable to set CSS attribute: "+L.attributes[M].name+" to "+w)}}else n.directModifySource&&"style"!==v&&(L.removeAttribute(L.attributes[M].name),M--),h(1,"Encountered unsupported attribute: "+v),n.unsupportedContentCallback&&n.unsupportedContentCallback("attribute",v);x&&("/*jSanityReturnFalseCallback*/"===x&&o.setAttribute("href","#"),o.setAttribute("onclick",x),p.push(o))}if(!m&&L.style)for(M=0;M<L.style.length;M++)if((S=L.style[M])in u){C=!1,"url("===(k=L.style.getPropertyValue(S)).substring(0,4)&&null!==n.externalContentCallback&&(k=n.externalContentCallback("CSSURL",S,k,c),C=!0),"position"===S&&"static"!==k&&"relative"!==k&&"inherit"!==k&&(k="inherit",C=!0);try{n.directModifySource?C&&o.style.setProperty(S,k):o.style.setProperty(S,k)}catch(e){h(0,"Unable to set CSS property: "+S)}}else n.directModifySource&&o.style.setProperty(S,null),h(1,"Encountered unsupported style property: "+S),n.unsupportedContentCallback&&n.unsupportedContentCallback("style",S);m?n.directModifySource&&A.push(L):n.directModifySource||t.appendChild(o),m||f(L,e,o),e=b}else n.directModifySource&&A.push(L),h(1,"Encountered unsupported element: "+s),n.unsupportedContentCallback&&n.unsupportedContentCallback("element",s);break;case L.TEXT_NODE:n.directModifySource||(o=l.createTextNode(L.nodeValue),t.appendChild(o));break;case L.COMMENT_NODE:break;default:n.directModifySource&&A.push(L),h(1,"Unknown node type: "+L.nodeType)}for(M=0;M<A.length;M++)try{A[M].removeNode(!0)}catch(e){try{A[M].remove()}catch(e){A[M].parentNode.removeChild(A[M])}}i.currentNode=r}(t,r),i.currentNode=o}}function f(e,t,r){var i=b(e,t,r);o.addNewJob(i)}function m(e){if(!e)throw"invalid number of parameters. At least one is expected";if("[object Object]"!=e.toString())throw"Invalid type of parameter";for(var t=0,r=null;t<arguments.length;t++){if("[object Object]"!=(r=arguments[t]).toString())throw"Invalid type of parameter";for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}function g(e){return Object.getOwnPropertyDescriptor(Document.prototype,"body")?Object.getOwnPropertyDescriptor(Document.prototype,"body").get.call(e):Object.getOwnPropertyDescriptor(document.__proto__,"body").get.call(e)}this.sanitizeMethod=function(e){var r,a,d,u,h,b;n=m({},t,e),m(c,n.customProtocols),n.isolatedTargetDOM?(n.directModifySource=!1,l=document.implementation.createHTMLDocument("destDoc")):(n.directModifySource=!0,r=document.createElement("span"),l=document),s=document.implementation.createHTMLDocument("sourceDoc"),(a=s.createElement("span")).innerHTML=n.inputString,g(s).appendChild(a),s.createTreeWalker!==Document.prototype.createTreeWalker&&(s=document.implementation.createHTMLDocument("sourceDoc"),a=s.createElement("span"),s.body.appendChild(a)),f((i=s.createTreeWalker(g(s),NodeFilter.SHOW_ALL,null,!1)).currentNode,"default",n.isolatedTargetDOM?l.body:r);var y=o.registerOnJobCompleted((function(){if(n.isolatedTargetDOM){var e=document.importNode(l.documentElement,!0);d=e.lastChild.firstChild}else d=n.directModifySource?a:r;for(u=0;u<p.length;u++)h=p[u],"/*jSanityClickCallback*/"===(b=h.getAttribute("onclick"))?h.onclick=n.linkClickCallback:"/*jSanityReturnFalseCallback*/"===b&&(h.onclick=function(){return!1});try{d.style.setProperty("display","inline-block"),n.maxWidth&&d.style.setProperty("max-width",n.maxWidth),n.maxHeight&&d.style.setProperty("max-height",n.maxHeight),n.overflow&&d.style.setProperty("overflow",n.overflow)}catch(e){}p=[],o.unRegisterListner(y),n.onFinishedCallback&&n.onFinishedCallback(d)}));return o.run(),d}},i=!(void 0!==document.documentMode&&document.documentMode<10);e.isSupport=function(){return i},e.sanitize=function(e){if(!i)throw"jSanity does not support run in current browser version.";return new o(r,e).sanitizeMethod(e)}}(jSanity);